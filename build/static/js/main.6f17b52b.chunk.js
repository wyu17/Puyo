(this.webpackJsonppuyo=this.webpackJsonppuyo||[]).push([[0],[,,,,,,,,,,function(o,t,n){},function(o,t,n){},function(o,t,n){},function(o,t,n){},function(o,t,n){},function(o,t,n){},function(o,t,n){},function(o,t,n){"use strict";n.r(t);var r=n(0),i=n(1),e=n(4),c=n.n(e),s=(n(10),n(2)),a=(n(11),function(o){return Object(r.jsx)("div",{className:o.type})}),p={R:{color:"RED"},G:{color:"GREEN"},B:{color:"BLUE"},O:{color:"EMPTY"}},u=function(){var o="RGB"[Math.floor(Math.random()*"RGB".length)];return p[o]},l=function(){return p.O},f=13,y=function(){return Array.from(Array(f),(function(){return new Array(6).fill(Object(r.jsx)(a,{type:l().color}))}))},j=function(o,t){var n={position:{x:0,y:0},position2:{x:0,y:0}},r=o.position.x,i=o.position.y,e=o.position2.x,c=o.position2.y;return 0===t?(n.position.x=r,n.position.y=i-1,n.position2.x=e+1,n.position2.y=c):1===t?(n.position.x=r+1,n.position.y=i+1,n.position2.x=e,n.position2.y=c):2===t?(n.position.x=r-1,n.position.y=i,n.position2.x=e,n.position2.y=c+1):3===t&&(n.position.x=r,n.position.y=i,n.position2.x=e-1,n.position2.y=c-1),n},v=(n(12),function(o){return Object(r.jsx)("div",{className:"stage",children:o.stage})}),x=(n(13),function(o){return Object(r.jsxs)("div",{className:"Display",children:[" ",o.text," ",o.display," "]})}),b=(n(14),function(o){var t=o.callBack,n=o.text;return Object(r.jsx)("button",{className:"button",onClick:t,children:n})});n(15);var O=function(){var o=Object(i.useState)(!1),t=Object(s.a)(o,2),n=t[0],e=t[1],c=Object(i.useState)(0),p=Object(s.a)(c,2),O=p[0],d=p[1],h=function(){var o=Object(i.useState)({position:{x:3,y:0},position2:{x:3,y:1},color:"EMPTY",color1:"EMPTY",dir:0}),t=Object(s.a)(o,2);return[t[0],t[1],function(o,t,n){return{position:{x:o.position.x+=t,y:o.position.y+=n},position2:{x:o.position2.x+=t,y:o.position2.y+=n},color:o.color,color1:o.color1,dir:o.dir}},function(o,t){return{position:{x:3,y:0},position2:{x:3,y:1},color:o,color1:t,dir:0}},function(o){var t=(o.dir+1)%4,n=j(o,t);return{position:n.position,position2:n.position2,color:o.color,color1:o.color1,dir:t}}]}(),m=Object(s.a)(h,5),g=m[0],E=m[1],T=m[2],w=m[3],M=m[4],P=function(o,t){var n=Object(i.useState)(Array.from(Array(f),(function(){return new Array(6).fill(Object(r.jsx)(a,{type:l().color}))}))),e=Object(s.a)(n,2),c=e[0],p=e[1],u=Object(i.useCallback)((function(o,t,n,i){for(var e=y(),c=0;c<f;c++)for(var s=0;s<6;s++)e[c][s]=t[c][s];n&&i&&(e[n.y][n.x]=Object(r.jsx)(a,{type:l().color}),e[i.y][i.x]=Object(r.jsx)(a,{type:l().color}));var p=o.dir>1?o.color1:o.color,u=o.dir>1?o.color:o.color1;return e[o.position.y][o.position.x]=Object(r.jsx)(a,{type:p}),e[o.position2.y][o.position2.x]=Object(r.jsx)(a,{type:u}),e}),[]),j=Object(i.useCallback)((function(o,t){var n=y();return n[0][3]=Object(r.jsx)(a,{type:o}),n[1][3]=Object(r.jsx)(a,{type:t}),n}),[]),v=function(o){for(var t=0;t<o.length;t++)if(0!==o[t].number)return!1;return!0};return[c,p,j,u,function(o,t,n,i){for(var e=y(),c=0;c<f;c++)for(var s=0;s<6;s++)e[c][s]=t[c][s];return e[0][3]=Object(r.jsx)(a,{type:n}),e[1][3]=Object(r.jsx)(a,{type:i}),e},function(o,t){for(var n=y(),i=0;i<f;i++)for(var e=0;e<6;e++)n[i][e]=o[i][e];for(var c=new Array(6),s=0;s<6;s++)c[s]={number:0,minHeight:0};for(var p=0;p<t.length;p++)if(t[p].length>=4)for(var u=0;u<t[p].length;u++){var j=t[p][u].x,x=t[p][u].y;n[x][j]=Object(r.jsx)(a,{type:l().color}),c[j].number++,c[j].minHeight<x&&(c[j].minHeight=x)}for(;!v(c);)for(var b=0;b<c.length;b++)if(0!==c[b].number){for(var O=c[b].minHeight;O>0;O--)n[O][b]=Object(r.jsx)(a,{type:n[O-1][b].props.type});n[0][b]=Object(r.jsx)(a,{type:l().color}),c[b].number--}return n}]}(),Y=Object(s.a)(P,6),k=Y[0],B=Y[1],N=Y[2],A=Y[3],G=Y[4],R=Y[5];console.log("rerender");var S=function(o,t,n){for(var r=0;r<o.length;r++)for(var i=0;i<o[r].length;i++)if(o[r][i].x===t&&o[r][i].y===n)return!0;return!1},C=function o(t,n,r,i,e,c){if(S(t,e,c)||function(o,t,n){for(var r=0;r<o.length;r++)if(o[r].x===t&&o[r].y===n)return!0;return!1}(n,e,c))return null;var s={x:e,y:c};if(n.push(s),e+1<6&&i[c][e+1].props.type===r){var a=o(t,n,r,i,e+1,c);null!==a&&(n=a)}if(c+1<f&&i[c+1][e].props.type===r){var p=o(t,n,r,i,e,c+1);null!==p&&(n=p)}if(0!==e&&i[c][e-1].props.type===r){var u=o(t,n,r,i,e-1,c);null!==u&&(n=u)}if(0!==c&&i[c-1][e].props.type===r){var l=o(t,n,r,i,e,c-1);null!==l&&(n=l)}return n},H=function(o){var t=[],n=new Array(6);n.fill(0);for(var r=0;r<f;r++)for(var i=0;i<6;i++){var e=o[r][i].props.type;if("EMPTY"!==e&&!S(t,i,r)){var c=C(t,[],e,o,i,r);if(c.length>0)for(var s=0;s<c.length;s++)n[c[s].x]++;t.push(c)}}for(var a=0,p=0;p<t.length;p++)if(t[p].length>=4)for(var u=0;u<t[p].length;u++)a+=10;var l=R(o,t);return B(l),[l,a]},I=function(o,t,n,r,i){var c;if(function(o,t,n){var r=o.position.x,i=o.position2.x,e=o.position.y,c=o.position2.y;return!(r>0&&("EMPTY"!==k[c][i-1].props.type&&-1===t||(0===o.dir||2===o.dir)&&"EMPTY"!==k[e][r-1].props.type&&1===t))&&!(r<5&&("EMPTY"!==k[c][i+1].props.type&&1===t||(0===o.dir||2===o.dir)&&"EMPTY"!==k[e][r+1].props.type&&1===t))&&!(0===i&&-1===t||5===r&&1===t||12===c&&1===n)}(g,o,t)&&!i)c=T(g,o,t);else{if(!function(o){var t=o.position.x,n=o.position.y,r=o.dir,i=j(o,(r+1)%4);return!(0===r&&5===t||1===r&&12===n||2===r&&0===t||(0===r||3===r)&&"EMPTY"!==k[i.position.y][i.position.x].props.type||(1===r||2===r)&&"EMPTY"!==k[i.position2.y][i.position2.x].props.type)}(g)||!i)return;c=M(g)}var s=A(c,k,n,r);B(s),function(o,t){return 12===o.position2.y||"EMPTY"!==t[o.position2.y+1][o.position2.x].props.type||(1===o.dir||3===o.dir)&&"EMPTY"!==t[o.position.y+1][o.position.x].props.type}(c,s)?function(o,t){for(var n=u().color,r=u().color,i=1,c=!1,s=t;!c;){var a=H(s);s=a[0];var p=a[1];0===p?c=!0:d(O+p*i),i++}if("EMPTY"!==s[0][3].props.type||"EMPTY"!==s[1][3].props.type)setTimeout((function(){d(0)}),1e3),setTimeout((function(){e(!0)}),1e3),setTimeout((function(){window.location.reload()}),3e3);else{s=G(o,s,n,r),B(s);var l=w(n,r);E(l)}}(c,s):E(c)};return function(o,t){var n=Object(i.useRef)();Object(i.useEffect)((function(){n.current=o}),[o]),Object(i.useEffect)((function(){if(null!==t){var o=setInterval((function(){n.current()}),t);return function(){clearInterval(o)}}}),[t])}((function(){!function(){var o=Object.assign({},g.position),t=Object.assign({},g.position2);I(0,1,o,t,!1)}()}),300),n?Object(r.jsx)("div",{children:Object(r.jsx)("h2",{className:"gameOver",children:" Game Over! Better luck next time! "})}):Object(r.jsxs)("div",{className:"puyo",tabIndex:"0",onKeyDown:function(o){return function(o){var t=o.keyCode;if(!n){var r=Object.assign({},g.position),i=Object.assign({},g.position2);37===t?I(-1,0,r,i,!1):39===t?I(1,0,r,i,!1):40===t?I(0,1,r,i,!1):38===t&&I(0,0,r,i,!0)}}(o)},children:[Object(r.jsxs)("aside",{children:[Object(r.jsx)(x,{text:"Score",display:O}),Object(r.jsx)("div",{className:"startButton",children:Object(r.jsx)(b,{callBack:function(){e(!1),d(0);var o=u().color,t=u().color;E(w(o,t)),B(N(o,t))},text:"New Game"})})]}),Object(r.jsx)(v,{stage:k})]})},d=(n(16),function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{id:"headline",children:" Puyo Puyo!"}),Object(r.jsx)(O,{})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(r.jsx)(d,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(o){o.unregister()}))}],[[17,1,2]]]);
//# sourceMappingURL=main.6f17b52b.chunk.js.map